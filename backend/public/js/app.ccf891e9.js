(function(e){function t(t){for(var i,o,s=t[0],l=t[1],u=t[2],d=0,p=[];d<s.length;d++)o=s[d],a[o]&&p.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"21bb":function(e,t,n){"use strict";var i=n("b6fa"),a=n.n(i);a.a},"2da4":function(e,t,n){},"3f03":function(e,t,n){},5072:function(e,t,n){"use strict";var i=n("b10c"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i,a,r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("site-viewer")],1)},s=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.siteUrl?n("div",{staticClass:"site-viewer",class:{hidden:!e.siteUrl||""===e.siteUrl,active:e.viewActive}},[n("iframe",{attrs:{width:"100%",height:"99%",sandbox:"allow-same-origin allow-scripts"}})]):e._e()},u=[],c=n("5d73"),d=n.n(c),p=(n("ac6a"),n("7f7f"),n("cebc")),f=n("2f62"),h={name:"SiteViewer",computed:Object(p["a"])({},Object(f["b"])(["siteUrl","siteUrlProxy","viewerReady"]),{viewActive:function(){return this.viewerReady&&"view"===this.$route.name}}),methods:{displayErrorTip:function(e,t){if(e&&t&&t.length){var n=this,i=e.offsetLeft+e.clientWidth/2,a=e.offsetTop+e.clientHeight-7,r=document.createElement("div"),o=function(){var e="";return t.forEach(function(t){e+="<li><b>".concat(t.name,": </b>").concat(t.error,"px</li>")}),e};r.setAttribute("class","lky-error-tip"),r.setAttribute("style","left: ".concat(i,"px; top: ").concat(a,"px")),r.innerHTML='\n      <div class="lky-point"></div>\n        <div class="lky-popup">\n          '.concat(this.text.errorsFound,': <ul class="lky-errors">').concat(o(),"</ul>\n        </div>\n      </div>"),document.body.appendChild(r);var s=r.querySelector(".lky-point"),l=r.querySelector(".lky-popup");s.onmouseover=function(){addClass(l,"active"),n.elementHighlight(e)},s.onmouseleave=function(){removeClass(l,"active"),n.removeHighlight()}}},elementHighlight:function(e){if(e){var t=e.getBoundingClientRect(),n=document.createElement("div");n.className="node-highlight",n.style.position="absolute",n.style.content="",n.style.height="".concat(t.height+"px"),n.style.width="".concat(t.width+"px"),n.style.top="".concat(t.top+"px"),n.style.right="".concat(t.right+"px"),n.style.bottom="".concat(t.bottom+"px"),n.style.left="".concat(t.left+"px"),n.style.background="#05f",n.style.opacity="0.25",document.body.appendChild(n)}},removeHighlight:function(){var e=document.getElementsByClassName("node-highlight"),t=!0,n=!1,i=void 0;try{for(var a,r=d()(e);!(t=(a=r.next()).done);t=!0){var o=a.value;document.body.removeChild(o)}}catch(s){n=!0,i=s}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}}}},v=h,m=(n("82ae"),n("2877")),g=Object(m["a"])(v,l,u,!1,null,null,null),b=g.exports,y={components:{SiteViewer:b}},w=y,_=(n("5c0b"),Object(m["a"])(w,o,s,!1,null,null,null)),k=_.exports,x=n("8c4f"),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"content"},[n("div",{staticClass:"container"},[e._m(0),n("enter-website",{ref:"url"}),n("design-uploader",{ref:"uploader"}),n("router-link",{attrs:{tag:"div",to:"/view"}},[e.getFile?n("v-button",{attrs:{disabled:!e.viewerReady}},[e._v("Let`s go!")]):e._e()],1)],1)])])},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"info-block"},[n("h1",{staticClass:"header"},[e._v("Make your website Perfect!")]),n("div",{staticClass:"description"},[n("p",[e._v("\n            Get difference between mockup and your website without layering!\n          ")]),n("p",[e._v("There are 2 simple steps to do that:")])])])}],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:!e.file,expression:"!file"}],staticClass:"design-uploader"},[n("label",{staticClass:"drag-area",attrs:{for:"file"}},[e._v("Drag the design or click for upload")]),n("input",{ref:"file",attrs:{id:"file",type:"file",hidden:""},on:{change:e.upload}})])},$=[],O={name:"DesignUploader",data:function(){return{file:null}},methods:{upload:function(e){var t=e.target.files[0]||e.originalEvent.dataTransfer.files[0];t&&(this.file=t,this.$store.dispatch("setDesign",t))}}},U=O,j=(n("6a87"),Object(m["a"])(U,S,$,!1,null,"511a5e6e",null)),T=j.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"enter-website"},[n("form-input",{ref:"url",attrs:{name:"url",label:"Enter website:",placeholder:"Type website url, like google.com"},on:{onchange:e.checkUrlAvailable}})],1)},R=[],A=(n("a481"),{serverUrl:"http://localhost:3000"}),F=n("bc3a"),P=n.n(F),M=n("2ef0"),H=n.n(M),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-item-general"},[n("div",{staticClass:"label"},[n("label",{attrs:{for:"input-"+e.name}},[e._v(e._s(e.label))])]),n("div",{staticClass:"input"},[e.valid?e._e():n("div",{staticClass:"validation-message"},[e._v("\n      "+e._s(e.validationMessage)+"\n    ")]),"checkbox"===e.type?n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],class:{valid:e.changed&&e.valid,invalid:e.changed&&!e.valid},attrs:{id:"input-"+e.name,name:e.name,placeholder:e.placeholder,disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{keyup:function(t){return e.$emit("onchange")},past:function(t){return e.$emit("onchange")},change:function(t){var n=e.inputValue,i=t.target,a=!!i.checked;if(Array.isArray(n)){var r=null,o=e._i(n,r);i.checked?o<0&&(e.inputValue=n.concat([r])):o>-1&&(e.inputValue=n.slice(0,o).concat(n.slice(o+1)))}else e.inputValue=a}}},"input",e.$props,!1)):"radio"===e.type?n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],class:{valid:e.changed&&e.valid,invalid:e.changed&&!e.valid},attrs:{id:"input-"+e.name,name:e.name,placeholder:e.placeholder,disabled:e.disabled,type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{keyup:function(t){return e.$emit("onchange")},past:function(t){return e.$emit("onchange")},change:function(t){e.inputValue=null}}},"input",e.$props,!1)):n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],class:{valid:e.changed&&e.valid,invalid:e.changed&&!e.valid},attrs:{id:"input-"+e.name,name:e.name,placeholder:e.placeholder,disabled:e.disabled,type:e.type},domProps:{value:e.inputValue},on:{keyup:function(t){return e.$emit("onchange")},past:function(t){return e.$emit("onchange")},input:function(t){t.target.composing||(e.inputValue=t.target.value)}}},"input",e.$props,!1))])])},D=[],B=(n("6b54"),n("c5f6"),{mounted:function(){this.resetValue()},beforeRouteUpdate:function(e,t,n){this.resetValue(),n(!0)},data:function(){return{inputValue:""}},props:{name:{type:String,required:!0},label:{type:String},type:{type:String,default:"text"},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},description:String,placeholder:String,validationRule:String,validationMessage:String,mask:String,maskPattern:String},computed:{changed:function(){if(this.inputValue||this.value)return this.inputValue!==this.value&&this.inputValue.toString()!==this.value.toString()}},methods:{resetValue:function(){this.value?this.inputValue=this.value:this.inputValue=""}}}),I=B,W=(n("f5e0"),Object(m["a"])(I,i,a,!1,null,null,null)),L=W.exports,q=(n("3b2b"),{computed:{rule:function(){switch(this.name){case"email":return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;case"password":return/^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})/;case"phone":return/^(\+7|7|8)?[\s-]?\(?[489][0-9]{2}\)?[\s-]?[0-9]{3}[\s-]?[0-9]{2}[\s-]?[0-9]{2}$/gm;case"url":return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:\/?#[\]@!$&'()*+,;=]+$/gm;default:return null}},valid:function(){var e=this.rule||this.validationRule&&new RegExp(this.validationRule);return!!this.inputValue&&(e?e.test(this.inputValue):this.inputValue&&this.inputValue.length&&""!==this.inputValue)}}}),z=n("23d1"),G=n.n(z);G.a.extendDefaults({showMaskOnHover:!1,showMaskOnFocus:!0});var Z={mounted:function(){var e=this;this.$nextTick(function(){e.applyMask()})},methods:{applyMask:function(){var e=document.getElementById("input-".concat(this.name));if(e&&this.mask)switch(this.mask){case"phone":G()({mask:"+7 (999) 999-99-99"}).mask(e);break;case"number":this.maskPattern?G()({mask:this.maskPattern}).mask(e):G()({regex:"^[0-9]{1,6}(\\.\\d{1,2})?$"}).mask(e);break}}}},J={name:"InputGeneral",mixins:[L,q,Z],data:function(){return{componentType:"general"}},props:{}},K=J,Q=(n("ff26"),Object(m["a"])(K,N,D,!1,null,"89a7dfec",null)),X=Q.exports,Y={name:"EnterWebsite",components:{FormInput:X},computed:Object(p["a"])({},Object(f["b"])(["siteUrl"])),methods:{checkUrlAvailable:H.a.throttle(function(){var e=this.$refs.url;if(e.valid||""===e.inputValue){var t=this;this.$store.dispatch("setSiteUrl",e.inputValue).then(function(e){t.$nextTick(function(){var t=document.getElementsByTagName("iframe")[0],n=function(n){t.src="about:blank",t.contentWindow.document.open(),t.contentWindow.document.write(n.replace(/<head>/i,'<head><base href="'+e+'">')),t.contentWindow.document.close()};P.a.get("".concat(A.serverUrl,"/proxy/").concat(e)).then(function(e){n(e.data)})})})}},300)}},ee=Y,te=(n("d48c"),Object(m["a"])(ee,C,R,!1,null,"701d4514",null)),ne=te.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{on:{click:function(t){return e.$emit("click")},touchmove:function(t){return e.$emit("click")}}},[e._t("default")],2)},ae=[],re={name:"Button"},oe=re,se=(n("5072"),Object(m["a"])(oe,ie,ae,!1,null,"fb4e63cc",null)),le=se.exports,ue={name:"home",components:{DesignUploader:T,EnterWebsite:ne,VButton:le},computed:Object(p["a"])({},Object(f["b"])(["getFile","siteUrl","viewerReady"]))},ce=ue,de=(n("21bb"),Object(m["a"])(ce,V,E,!1,null,null,null)),pe=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"view"})},he=[],ve=n("a745"),me=n.n(ve),ge=n("75fc"),be=n("5bc5");function ye(e,t,n){var i={headers:{"Content-Type":"multipart/form-data"}},a=Object(ge["a"])(t),r=Object(be["a"])(a),o=new FormData;o.append("file",e),o.append("nodes",r),P.a.post(A.serverUrl+"/get-errors",o,i).then(function(e){n(e)})}function we(e,t){P.a.get(A.serverUrl+"/get-target-view?url="+e).then(function(e){var n=e.data;t(n)})}var _e={name:"View issues",mounted:function(){!this.viewerReady&&this.$router.push({name:"/"}),this.viewerReady&&this.getErrorsFromApi()},computed:Object(p["a"])({},Object(f["b"])(["getFile","siteUrl","viewerReady"])),beforeRouteUpdate:function(e,t,n){this.viewerReady?(n(!0),this.getErrorsFromApi()):(n(!1),this.$router.push({name:"/"}))},methods:{getErrorsFromApi:function(){var e=this,t=document.querySelector(".site-viewer iframe").contentWindow.document.body.getElementsByTagName("*");ye(this.getFile,t,function(t){t&&me()(t)&&e.$store.dispatch("setErrors",t)})}}},ke=_e,xe=Object(m["a"])(ke,fe,he,!1,null,"6bce5e56",null),Ve=xe.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"test-view"},[n("div",{domProps:{innerHTML:e._s(e.targetViewHtml||"This is test view")}})])},Se=[],$e={name:"TestView",data:function(){return{targetViewHtml:null}},mounted:function(){this.getView("https://luxezone.ru")},methods:{getView:function(e){var t=this;we(e,function(e){t.targetViewHtml=e})}}},Oe=$e,Ue=Object(m["a"])(Oe,Ee,Se,!1,null,"6c73200f",null),je=Ue.exports;r["a"].use(x["a"]);var Te=new x["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:pe},{path:"/view",name:"view",component:Ve},{path:"/test-view",name:"test-view",component:je}]}),Ce=n("795b"),Re=n.n(Ce);r["a"].use(f["a"]);var Ae=new f["a"].Store({state:{getFile:null,siteUrl:null,errors:null},getters:{getFile:function(e){return e.getFile},siteUrl:function(e){return e.siteUrl},siteUrlProxy:function(e){return A.serverUrl+"/proxy/"+e.siteUrl},viewerReady:function(e){return e.getFile&&e.siteUrl},errors:function(e){return e.errors}},mutations:{SET_DESIGN:function(e,t){e.getFile=t},SET_SITE_URL:function(e,t){e.siteUrl=t},SET_ERRORS:function(e,t){e.errors=t}},actions:{setDesign:function(e,t){var n=e.commit;n("SET_DESIGN",t)},setSiteUrl:function(e,t){var n=e.commit,i="http://"+t.replace("http://","").replace("https://","");return new Re.a(function(e){n("SET_SITE_URL",i),e(i)})},setErrors:function(e,t){var n=e.commit;n("SET_ERRORS",t)}}});r["a"].config.productionTip=!1,new r["a"]({router:Te,store:Ae,render:function(e){return e(k)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("8fba"),a=n.n(i);a.a},6930:function(e,t,n){},"6a87":function(e,t,n){"use strict";var i=n("e268"),a=n.n(i);a.a},"82ae":function(e,t,n){"use strict";var i=n("2da4"),a=n.n(i);a.a},"8fba":function(e,t,n){},b10c:function(e,t,n){},b6fa:function(e,t,n){},c214:function(e,t,n){},d48c:function(e,t,n){"use strict";var i=n("6930"),a=n.n(i);a.a},e268:function(e,t,n){},f5e0:function(e,t,n){"use strict";var i=n("3f03"),a=n.n(i);a.a},ff26:function(e,t,n){"use strict";var i=n("c214"),a=n.n(i);a.a}});
//# sourceMappingURL=app.ccf891e9.js.map