(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProjectsView"],{1102:function(t,e,n){"use strict";var a=n("42f1"),i=n.n(a);i.a},1666:function(t,e,n){"use strict";var a=n("792a"),i=n.n(a);i.a},"1c52":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"newProject":"New project","activeProjects":"Active projects","projectTitle":"Project title","Have no projects yet":"Have no projects yet"},"ru":{"newProject":"Новый проект","activeProjects":"Активные проекты","projectTitle":"Название проекта","Have no projects yet":"Пока нет проектов"}}'),delete t.options._Ctor}},"1e4d":function(t,e,n){},2368:function(t,e,n){},"3e8a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"pp-modal",class:{show:t.showModal},staticStyle:{display:"none"}},[n("div",{staticClass:"pp-modal-overlay",on:{click:function(e){!t.unableClosing&&(t.showModal=!1)}}}),n("div",{staticClass:"pp-modal-container",class:{wide:t.wide}},[n("div",{staticClass:"pp-modal-close",on:{click:function(e){t.unableClosing?t.$emit("reload"):t.showModal=!1}}}),n("div",{staticClass:"pp-modal-header"},[n("div",{staticClass:"pp-modal-title"},[t._v(t._s(t.title))]),t.description?n("div",{staticClass:"pp-modal-description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t.showModal?n("div",{staticClass:"pp-modal-content"},[t._t("default")],2):t._e()])])},i=[],o=n("025e"),r={name:"VModal",data:function(){return{showModal:!1}},props:{title:String,description:String,unableClosing:Boolean,wide:Boolean},watch:{showModal:function(t){t?(Object(o["a"])(document.body,"popup-open"),console.log("onModalOpen"),this.$emit("open")):(Object(o["j"])(document.body,"popup-open"),this.$emit("close"))}}},s=r,c=(n("ef16"),n("2877")),l=Object(c["a"])(s,a,i,!1,null,null,null);e["a"]=l.exports},4295:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-placeholder",class:[{transparent:t.transparent},t.alignment]},[t.icon?n("div",{staticClass:"image"},[n("v-icon",{attrs:{icon:t.icon,params:{iconSize:t.iconSize}}})],1):t._e(),n("div",{staticClass:"title"},[t._v(t._s(t.title))]),t.text?n("div",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._t("default")],2)},i=[],o=n("bd91"),r={name:"EmptyPlaceholder",components:{VIcon:o["a"]},props:{title:{type:String,default:function(){return this.$t("Have no data here")}},text:String,icon:String,iconSize:{type:String,default:"100px"},alignment:{type:String,default:"center"},transparent:Boolean}},s=r,c=(n("8234"),n("2877")),l=Object(c["a"])(s,a,i,!1,null,"2f14161d",null);e["a"]=l.exports},"42f1":function(t,e,n){},"49f0":function(t,e,n){},"4b14":function(t,e,n){"use strict";var a=n("2368"),i=n.n(a);i.a},"51b2":function(t,e,n){"use strict";var a=n("ece5"),i=n.n(a);i.a},"5eac":function(t,e,n){},"5f70":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-general-list"},[n("div",{staticClass:"header"},[t.title?n("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t.sort.length?n("filters-bar",{on:{filtersChange:function(e){return t.$emit("filtersChange",e)}}},t._l(t.sort,function(t,e){return n("v-select-clear",{key:e,attrs:{name:t.name,label:t.label,options:t.options}})}),1):t._e()],1),n("div",{staticClass:"card-general-list-container"},[t._t("default")],2)])},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filters-bar"},[t._t("default")],2)},r=[],s=(n("7f7f"),n("ac6a"),{name:"FiltersBar",mounted:function(){var t=this;this.$children.forEach(function(e){e.$on("change",t.onFilterChange)})},beforeDestroy:function(){var t=this;this.$children.forEach(function(e){e.$off("change",t.onFilterChange)})},data:function(){return{changedFilters:{}}},methods:{onFilterChange:function(t){this.setChangedFilter(t),this.$emit("filtersChange",this.changedFilters)},setChangedFilter:function(t){if(this.changedFilters.length)for(var e in this.changedFilters)if(this.changedFilters[e].name===t.name)return this.changedFilters[e]=t;this.changedFilters=t}}}),c=s,l=(n("4b14"),n("2877")),u=Object(l["a"])(c,o,r,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-select-clear"},[n("v-select",{attrs:{value:t.value,name:t.name,label:t.label,options:t.options},on:{change:function(e){return t.$emit("change",e)}}})],1)},f=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-select"},[t.label?n("div",{staticClass:"label"},[n("label",{attrs:{for:"select-"+t.name}},[t._v(t._s(t.label))])]):t._e(),n("div",{staticClass:"value"},[n("div",{staticClass:"selected"},[t._v(t._s(t.selected.name))]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],ref:"select-"+t.name,attrs:{id:t.id||"select-"+t.name,disabled:t.disabled},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selected=e.target.multiple?n:n[0]},function(e){var n;return t.$emit("change",(n={},n[t.name]=t.selected.value,n))}]}},t._l(t.options,function(e,a){return n("option",{key:a,attrs:{"data-index":a},domProps:{value:e,selected:0===a}},[t._v("\n        "+t._s(e.name))])}),0)])])},m=[],v=(n("c5f6"),{name:"VSelect",created:function(){this.selected=this.options&&this.options[0]},data:function(){return{selected:""}},props:{name:{type:String,required:!0},id:String,label:{type:String},options:{type:Array,default:function(){return[]}},value:{type:[String,Number]},disabled:Boolean}}),b=v,g=(n("8f25"),Object(l["a"])(b,h,m,!1,null,null,null)),_=g.exports,j={name:"VSelectClear",components:{VSelect:_},extends:_},w=j,$=Object(l["a"])(w,p,f,!1,null,"057739d0",null),C=$.exports,y={name:"CardGeneralList",components:{FiltersBar:d,VSelectClear:C},data:function(){return{activeFilters:{}}},props:{title:String,sort:{type:Array,default:function(){return[]}}}},O=y,P=(n("9bc4"),Object(l["a"])(O,a,i,!1,null,"dc181e34",null));e["a"]=P.exports},"6c67":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"panel",staticClass:"panel-control",class:{"dropdown-open":t.showDropdown},on:{mouseleave:function(e){t.showDropdown=!1}}},[n("div",{staticClass:"panel-control-content",on:{click:function(e){t.dropdown&&(t.showDropdown=!t.showDropdown)}}},[t._t("default")],2),t.dropdown?n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDropdown,expression:"showDropdown"}],ref:"dropdown",staticClass:"dropdown"},[n("div",{staticClass:"dropdown-content"},[t._t("dropdown")],2)]):t._e()])},i=[],o=n("025e"),r={name:"PanelControl",mounted:function(){var t=this;this.dropdown&&(console.log("test click outside panel control dropdown"),this.$nextTick(function(){document.body.onclick=function(e){e.target!==t.$refs.panel&&t.$refs.panel!==Object(o["i"])(e.target,"panel-control")&&(t.showDropdown=!1),e.stopPropagation()}}))},data:function(){return{showDropdown:!1}},props:{dropdown:Boolean},methods:{closePanelDropdown:function(){}}},s=r,c=(n("e010"),n("2877")),l=Object(c["a"])(s,a,i,!1,null,"2b67f58c",null);e["a"]=l.exports},"75a6":function(t,e,n){},"792a":function(t,e,n){},8234:function(t,e,n){"use strict";var a=n("85bc"),i=n.n(a);i.a},"85bc":function(t,e,n){},"8e77":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-button",{staticClass:"v-button-inline",attrs:{loading:t.loading,theme:t.appTheme},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},i=[],o=n("f6f1"),r={name:"VButtonInline",components:{VButton:o["a"]},extends:o["a"]},s=r,c=(n("1102"),n("2877")),l=Object(c["a"])(s,a,i,!1,null,"7e125455",null);e["a"]=l.exports},"8f25":function(t,e,n){"use strict";var a=n("1e4d"),i=n.n(a);i.a},"96bf":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"projects-view"},[n("div",{staticClass:"projects-view-add"},[n("website-selector",{ref:"websiteSelector",on:{create:t.createProject}})],1),t.hasProjects&&t.loaded?[n("project-list",{attrs:{title:t.$t("activeProjects"),projects:t.projects,sort:t.sort},on:{delete:function(e){return t.deleteProject(e)},edit:function(e){return t.openModal("edit",e)},filtersChange:function(e){return t.getAllProjects(e)}}})]:t._e(),!t.hasProjects&&t.loaded?n("empty-placeholder",{attrs:{title:t.$t("Have no projects yet"),icon:"project",transparent:""}}):t._e(),n("v-modal",{ref:"operationalModal",staticClass:"operational-modal",attrs:{title:t.currentModalTitle,wide:""}},[n("form-group",{ref:"operationalForm"},[n("v-input-clear",{attrs:{id:"projectName",name:"name",value:t.selectedName,label:t.$t("Project name"),required:""}})],1),n("v-button-primary",{on:{click:t.currentAction}},[t._v(t._s(t.currentModalButtonName))])],1)],2)},i=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("bd86")),r=n("6dc5"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"projects-list"},[n("card-general-list",{attrs:{title:t.title,sort:t.sort},on:{filtersChange:function(e){return t.$emit("filtersChange",e)}}},t._l(t.projects,function(e){return n("v-card-general",{key:e.id,attrs:{name:e.name,image:e.image,caption:t.normalizeDate(e.updatedAt),text:"Pages: "+(e.pagesCount||0)},on:{delete:function(n){return t.$emit("delete",e)},edit:function(n){return t.$emit("edit",e)},click:function(n){return t.$router.push("/i/p/"+e.permalink+"/")}}})}),1)],1)},c=[],l=n("5f70"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"project-item"},[n("v-card",{attrs:{name:t.name,image:t.image,caption:t.caption,badge:t.badge,text:t.text},on:{click:function(e){return t.$emit("click")}}},[n("div",{on:{click:function(e){return t.$emit("delete",t.item)}}},[n("zondicon",{attrs:{icon:"trash"}})],1),n("div",{on:{click:function(e){return t.$emit("edit",t.item)}}},[n("zondicon",{attrs:{icon:"edit-pencil"}})],1)])],1)},d=[],p=n("bf72"),f=n("28ca"),h={name:"VCardGeneral",components:{Zondicon:f["a"],VCard:p["a"]},extends:p["a"],props:{item:Object}},m=h,v=(n("c94c"),n("2877")),b=Object(v["a"])(m,u,d,!1,null,null,null),g=b.exports,_=n("025e"),j={name:"ProjectsList",components:{VCardGeneral:g,CardGeneralList:l["a"]},props:{projects:{type:Array,default:function(){return[]}},title:String,sort:Array},methods:{normalizeDate:function(t){return Object(_["h"])(t)}}},w=j,$=Object(v["a"])(w,s,c,!1,null,null,null),C=$.exports,y=n("3e8a"),O=n("2231"),P=n("e135"),x=n("2f62"),S=n("4359"),M=n("892c"),k=n("4295"),V=n("db44"),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"website-selector"},[n("v-input-search",{ref:"search",attrs:{name:"url",title:"URL",placeholder:t.$t("Type website URL.."),"validation-message":t.$t("URL not valid"),required:""},on:{onchange:function(e){return t.$emit("onchange")}}})],1)},E=[],A=(n("386d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-input-search"},[n("v-input",{ref:"input",attrs:{type:t.type,id:t.id,name:t.name,value:t.value,label:t.label,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete,"validation-message":t.validationMessage,disabled:t.disabled,theme:t.theme},on:{onchange:function(e){return t.$emit("onchange")}}}),n("v-button-inline",{staticClass:"v-input-search-submit",attrs:{disabled:!t.isValid},on:{click:t.onclick}},[n("v-icon",{attrs:{mode:"feather",icon:"arrow-right-circle",params:{iconSize:"28px"}}}),n("span",[t._v(t._s(t.buttonText))])],1),t.showSelect?n("div",{staticClass:"v-input-select"},[t._t("default")],2):t._e()],1)}),D=[],B=n("ccfc"),N=n("bd91"),I=n("8e77"),T={name:"VInputSearch",components:{VButtonInline:I["a"],VIcon:N["a"],VInput:B["a"]},mounted:function(){var t=this;this.$refs.input.$on("onchange",function(e){t.currentValue=e.value,t.isValid=e.valid,t.$emit("onchange",e)})},data:function(){return{showSelect:!1,currentValue:"",isValid:!1}},extends:B["a"],props:{items:{type:Array,default:function(){return[]}},buttonText:String},methods:{onclick:function(){this.$emit("onclick")}}},z=T,q=(n("1666"),Object(v["a"])(z,A,D,!1,null,null,null)),L=q.exports,G={name:"WebsiteSelector",components:{VInputSearch:L},mounted:function(){var t=this;this.$refs.search.$on("onclick",function(){t.$emit("create")})}},H=G,R=(n("51b2"),Object(v["a"])(H,F,E,!1,null,null,null)),U=R.exports;function J(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(n,!0).forEach(function(e){Object(o["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Z={name:"ProjectsView",created:function(){this.initProjects()},mixins:[V["a"]],components:{WebsiteSelector:U,EmptyPlaceholder:k["a"],VInputClear:P["a"],FormGroup:O["a"],VModal:y["a"],ProjectList:C,VButtonPrimary:r["a"]},data:function(){return{loaded:!1,modals:{},selectedModal:"create",sort:[]}},computed:W({},Object(x["b"])(["projects","hasProjects"])),methods:{initProjects:function(){this.getAllProjects(),this.sort=[{name:"sort",label:this.$t("sort"),options:[{name:this.$t("byActivity"),value:"updatedAt"},{name:this.$t("byPagesCount"),value:"pagesCount"},{name:this.$t("A-Z"),value:"name"}]}],this.modals={create:{title:this.$t("createProject"),action:"createProject",buttonName:this.$t("create")},edit:{title:this.$t("editProject"),action:"editProject",buttonName:this.$t("save")}}},getAllProjects:function(t){var e=this;this.$store.dispatch(S["u"],t||"").then(function(){e.loaded=!0}).catch(function(t){Object(M["e"])(e,"error",t),e.loaded=!0})},createProject:function(){var t=this,e=this,n=this.$refs.websiteSelector.$children[0];if(!n.isValid)return Object(M["e"])(this,"error","Project name did not provide or not valid!");this.$store.dispatch(S["s"],{url:n.currentValue}).then(function(n){e.$refs.operationalModal.showModal=!1,Object(M["e"])(t,"success",'Project "'.concat(n.name,'" successfully created!')),e.$refs.websiteSelector.$children[0].$children[0].clearValue()}).catch(function(e){return Object(M["e"])(t,"error",e)})},editProject:function(){var t=this;if(this.$refs.operationalForm.childrenChanged)return this.$refs.operationalForm.valid?void this.$store.dispatch(S["t"],W({},this.$refs.operationalForm.changedItems,{id:this.dataForOperations.id})).then(function(){return t.$refs.operationalModal.showModal=!1,Object(M["e"])(t,"success","Project successfully edited")}).then(function(e){return Object(M["e"])(t,"error",e)}):Object(M["e"])(this,"error","Project name did not provide or not valid!")},deleteProject:function(t){var e=this;t&&this.$store.dispatch(S["v"],t).then(function(){return Object(M["e"])(e,"success",'"'.concat(t.name,'" moved to trash'))}).then(function(t){return Object(M["e"])(e,"error",t)})},updateProject:function(t){downloadProjectResources({folder:t.permalink,url:t.url},function(){})}}},K=Z,Q=(n("a8d2"),n("d24d")),X=Object(v["a"])(K,a,i,!1,null,null,null);"function"===typeof Q["default"]&&Object(Q["default"])(X);e["default"]=X.exports},"9bc4":function(t,e,n){"use strict";var a=n("75a6"),i=n.n(a);i.a},"9f32":function(t,e,n){"use strict";var a=n("d1f6"),i=n.n(a);i.a},a8d2:function(t,e,n){"use strict";var a=n("49f0"),i=n.n(a);i.a},bf72:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-card",class:{selected:t.selected}},[n("div",{staticClass:"v-card-content"},[n("div",{staticClass:"v-card-image-container"},[t.image?n("div",{staticClass:"image",style:{backgroundImage:"url("+t.image+")"},attrs:{alt:t.name}}):t._e(),t.badge?n("div",{staticClass:"v-card-badge"},[t._v(t._s(t.badge))]):t._e()]),n("div",{staticClass:"v-card-text-container",on:{click:t.onclick}},[n("div",{staticClass:"name"},[t._v(t._s(t.name))]),n("div",{staticClass:"text"},[t._v(t._s(t._f("truncate")(t.text,70)))]),n("div",{staticClass:"caption"},[t._v(t._s(t.caption))])])]),t.showMenu?n("div",{staticClass:"v-card-menu"},[t.selectingMode?t._e():n("panel-control",{attrs:{dropdown:""},scopedSlots:t._u([{key:"dropdown",fn:function(){return[t._t("menu")]},proxy:!0}],null,!0)},[n("v-toggle",{attrs:{icon:"navigation-more",params:{iconSize:"25px"}}})],1)],1):t._e(),n("div",{staticClass:"v-card-actions"},[t._t("default")],2)])},i=[],o={filters:{truncate:function(t,e){return t&&t.length>e?"".concat(t.substring(0,e),"..."):t}}},r=n("10bc"),s=n("6c67"),c={name:"VCard",components:{PanelControl:s["a"],VToggle:r["a"]},mixins:[o],data:function(){return{selected:!1}},props:{name:{type:String,required:!0},image:String,caption:String,text:String,badge:String,selectingMode:Boolean,showMenu:Boolean},methods:{onclick:function(t){if(t.ctrlKey||this.selectingMode)return this.$emit("select"),this.selected=!this.selected;this.$emit("click")}}},l=c,u=(n("9f32"),n("2877")),d=Object(u["a"])(l,a,i,!1,null,null,null);e["a"]=d.exports},c31b:function(t,e,n){"use strict";var a=n("e3ab"),i=n.n(a);i.a},c94c:function(t,e,n){"use strict";var a=n("f86a"),i=n.n(a);i.a},d1f6:function(t,e,n){},d24d:function(t,e,n){"use strict";var a=n("1c52"),i=n.n(a);e["default"]=i.a},db44:function(t,e,n){"use strict";n("7f7f");e["a"]={name:"ModalMixin",data:function(){return{currentAction:null,dataForOperations:{}}},computed:{currentModalTitle:function(){return this.modals&&this.modals[this.selectedModal].title},currentModalDescription:function(){return this.modals&&this.modals[this.selectedModal].description},currentModalButtonName:function(){return this.modals&&this.modals[this.selectedModal].buttonName},selectedName:function(){return this.dataForOperations&&this.dataForOperations.name}},methods:{openModal:function(t,e){this.dataForOperations=e||{},this.selectedModal=t,this.$refs.operationalModal.showModal=!0;var n=this.modals[this.selectedModal].action;"function"===typeof this[n]&&(this.currentAction=this[n])}}}},e010:function(t,e,n){"use strict";var a=n("5eac"),i=n.n(a);i.a},e135:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-input",{ref:"input",staticClass:"v-input-clear",attrs:{type:t.type,id:t.id,name:t.name,value:t.value,label:t.label,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete,disabled:t.disabled,theme:t.theme},on:{onchange:function(e){return t.$emit("onchange")}}})},i=[],o=n("ccfc"),r={name:"VInputClear",components:{VInput:o["a"]},mounted:function(){var t=this;this.$refs.input.$on("onchange",function(){t.$emit("onchange")})},extends:o["a"]},s=r,c=(n("c31b"),n("2877")),l=Object(c["a"])(s,a,i,!1,null,null,null);e["a"]=l.exports},e3ab:function(t,e,n){},ece5:function(t,e,n){},ef16:function(t,e,n){"use strict";var a=n("fc36"),i=n.n(a);i.a},f86a:function(t,e,n){},fc36:function(t,e,n){}}]);
//# sourceMappingURL=ProjectsView.ProjectsView.js.map