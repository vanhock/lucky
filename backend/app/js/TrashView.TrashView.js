(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TrashView"],{"08b8":function(t,e,n){},"09d1":function(t,e,n){"use strict";var a=n("40a3"),o=n.n(a);e["default"]=o.a},"1aaa":function(t,e,n){"use strict";var a=n("617d"),o=n.n(a);e["default"]=o.a},"1e0f":function(t,e,n){},3110:function(t,e,n){"use strict";var a=n("d5b3"),o=n.n(a);o.a},3126:function(t,e,n){"use strict";var a=n("e804"),o=n.n(a);o.a},"3e8a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"pp-modal",class:{show:t.showModal},staticStyle:{display:"none"}},[n("div",{staticClass:"pp-modal-overlay",on:{click:function(e){!t.unableClosing&&(t.showModal=!1)}}}),n("div",{staticClass:"pp-modal-container",class:{wide:t.wide}},[n("div",{staticClass:"pp-modal-close",on:{click:function(e){t.unableClosing?t.$emit("reload"):t.showModal=!1}}}),n("div",{staticClass:"pp-modal-header"},[n("div",{staticClass:"pp-modal-title"},[t._v(t._s(t.title))]),t.description?n("div",{staticClass:"pp-modal-description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t.showModal?n("div",{staticClass:"pp-modal-content"},[t._t("default")],2):t._e()])])},o=[],s=n("025e"),i={name:"VModal",data:function(){return{showModal:!1}},props:{title:String,description:String,unableClosing:Boolean,wide:Boolean},watch:{showModal:function(t){t?(Object(s["a"])(document.body,"popup-open"),console.log("onModalOpen"),this.$emit("open")):(Object(s["j"])(document.body,"popup-open"),this.$emit("close"))}}},r=i,l=(n("ef16"),n("2877")),c=Object(l["a"])(r,a,o,!1,null,null,null);e["a"]=c.exports},"40a3":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"Empty projects trash":"Empty projects trash","Restore":"Restore","Delete forever":"Delete forever","Empty all in trash":"Empty all in trash","All documents in trash will be deleted permanently!":"All documents in trash will be deleted permanently!","Delete project":"Delete project","Delete page":"Delete page","The Project will be deleted permanently!":"The Project will be deleted permanently!","The Page will be deleted permanently!":"The Page will be deleted permanently!"},"ru":{"Empty projects trash":"Очистить проекты в корзине","Restore":"Восстановить","Delete forever":"Удалить навсегда","Empty all in trash":"Удалить все содержимое корзины","All documents in trash will be deleted permanently!":"Все документы в корзине удалятся без возможности восстановления!","Delete project":"Удалить проект","Delete page":"Удалить страницу","The Project will be deleted permanently!":"Проект будет удален без возможности восстановления!","The Page will be deleted permanently!":"Страница будет удалена без возможности восстановления!"}}'),delete t.options._Ctor}},4295:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-placeholder",class:[{transparent:t.transparent},t.alignment]},[t.icon?n("div",{staticClass:"image"},[n("v-icon",{attrs:{icon:t.icon,params:{iconSize:t.iconSize}}})],1):t._e(),n("div",{staticClass:"title"},[t._v(t._s(t.title))]),t.text?n("div",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._t("default")],2)},o=[],s=n("bd91"),i={name:"EmptyPlaceholder",components:{VIcon:s["a"]},props:{title:{type:String,default:function(){return this.$t("Have no data here")}},text:String,icon:String,iconSize:{type:String,default:"100px"},alignment:{type:String,default:"center"},transparent:Boolean}},r=i,l=(n("6aca"),n("2877")),c=Object(l["a"])(r,a,o,!1,null,"49923640",null);e["a"]=c.exports},5474:function(t,e,n){"use strict";var a=n("1e0f"),o=n.n(a);o.a},"617d":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"Restore":"Restore","Delete forever":"Delete forever"},"ru":{"Restore":"Восстановить","Delete forever":"Удалить навсегда"}}'),delete t.options._Ctor}},"6aca":function(t,e,n){"use strict";var a=n("08b8"),o=n.n(a);o.a},"6c67":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"panel",staticClass:"panel-control",class:{"dropdown-open":t.showDropdown},on:{mouseleave:function(e){t.showDropdown=!1}}},[n("div",{staticClass:"panel-control-content",on:{click:function(e){t.dropdown&&(t.showDropdown=!t.showDropdown)}}},[t._t("default")],2),t.dropdown?n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDropdown,expression:"showDropdown"}],ref:"dropdown",staticClass:"dropdown"},[n("div",{staticClass:"dropdown-content"},[t._t("dropdown")],2)]):t._e()])},o=[],s=n("025e"),i={name:"PanelControl",mounted:function(){var t=this;this.dropdown&&(console.log("test click outside panel control dropdown"),this.$nextTick(function(){document.body.onclick=function(e){e.target!==t.$refs.panel&&t.$refs.panel!==Object(s["i"])(e.target,"panel-control")&&(t.showDropdown=!1),e.stopPropagation()}}))},data:function(){return{showDropdown:!1}},props:{dropdown:Boolean},methods:{closePanelDropdown:function(){}}},r=i,l=(n("5474"),n("2877")),c=Object(l["a"])(r,a,o,!1,null,"57819766",null);e["a"]=c.exports},"6d1b":function(t,e,n){"use strict";var a=n("fa26"),o=n.n(a);o.a},"6dc5":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-button",{staticClass:"v-button-primary",attrs:{loading:t.loading,theme:t.appTheme,"no-shadow":""},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},o=[],s=n("f6f1"),i={name:"VButtonPrimary",components:{VButton:s["a"]},extends:s["a"]},r=i,l=(n("3126"),n("2877")),c=Object(l["a"])(r,a,o,!1,null,"475a7188",null);e["a"]=c.exports},7252:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trash-view"},[t.trashLength?[n("v-button-primary",{on:{click:function(e){return t.openModal("deleteAll",{target:"project",id:t.projectsTrashIds})}}},[t._v(t._s(t.$t("Empty projects trash")))]),n("trash-list",{attrs:{trash:t.tasksTrash,title:t.$t("Tasks")},on:{restore:function(e){return t.restore("task",e)},delete:function(e){return t.openModal("deleteTask",Object.assign({},{target:"task"},e))}}}),n("trash-list",{attrs:{trash:t.projectsTrash,title:t.$t("projects")},on:{restore:function(e){return t.restore("project",e)},delete:function(e){return t.openModal("deleteProject",Object.assign({},{target:"project"},e))}}}),n("v-modal",{ref:"operationalModal",staticClass:"operational-modal",attrs:{title:t.currentModalTitle,description:t.currentModalDescription}},[n("v-button-primary",{on:{click:t.currentAction}},[t._v(t._s(t.currentModalButtonName))])],1)]:t._e(),t.trashLength?t._e():[n("empty-placeholder",{attrs:{title:"Trash is empty",icon:"garbage"}})]],2)},o=[],s=n("cebc"),i=n("db44"),r=n("6dc5"),l=n("4359"),c=n("892c"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.trash&&t.trash.length?n("div",{staticClass:"trash-list"},[n("card-table-list",{attrs:{title:t.title}},t._l(t.trash,function(e){return n("v-card-table",{key:e.id,staticClass:"trash-list-item",attrs:{name:e.name,caption:t.normalizeData(e.updatedAt),actions:t.actions},on:{restore:function(n){return t.$emit("restore",e)},delete:function(n){return t.$emit("delete",e)}}})}),1)],1):t._e()},u=[],p=n("025e"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"v-card-table",attrs:{name:t.name,caption:t.caption,text:t.text,badge:t.badge}},[t.actions&&t.actions.length?t._l(t.actions,function(e,a){return n("v-button-inline",{key:a,class:"action-"+e.name,on:{click:function(n){return t.$emit(e.name)}}},[t._v(t._s(e.title))])}):t._e()],2)},h=[],m=n("bf72"),v=n("8e77"),b={name:"VCardTable",components:{VButtonInline:v["a"],VCard:m["a"]},extends:m["a"],props:{actions:{type:Array,default:function(){return[]}}}},_=b,w=(n("6d1b"),n("2877")),g=Object(w["a"])(_,f,h,!1,null,null,null),y=g.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-table-list"},[t.title?n("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),n("div",{staticClass:"card-table-list-container"},[t._t("default")],2)])},j=[],$={name:"CardTableList",props:{title:String}},T=$,M=(n("b937"),Object(w["a"])(T,C,j,!1,null,null,null)),k=M.exports,x={name:"TrashList",components:{CardTableList:k,VCardTable:y},created:function(){this.actions=[{name:"restore",title:this.$t("Restore")},{name:"delete",title:this.$t("Delete forever")}]},data:function(){return{actions:[]}},props:{trash:{type:Array,default:function(){return[]}},title:String},methods:{normalizeData:function(t){return Object(p["h"])(t)}}},O=x,D=n("1aaa"),E=Object(w["a"])(O,d,u,!1,null,null,null);"function"===typeof D["default"]&&Object(D["default"])(E);var S=E.exports,B=n("2f62"),P=n("3e8a"),V=n("4295"),A={name:"TrashView",mixins:[i["a"]],components:{EmptyPlaceholder:V["a"],TrashList:S,VButtonPrimary:r["a"],VModal:P["a"]},created:function(){this.$store.dispatch(l["G"]),this.$store.dispatch(l["H"]),this.modals={deleteAll:{title:this.$t("Empty all in trash"),description:this.$t("All documents in trash will be deleted permanently!"),action:"delete",buttonName:this.$t("Empty trash")},deleteProject:{title:this.$t("Delete project"),description:this.$t("The Project will be deleted permanently!"),action:"delete",buttonName:this.$t("Delete project")},deleteTask:{title:this.$t("Delete task"),description:this.$t("The Task will be deleted permanently!"),action:"delete",buttonName:this.$t("Delete task")}}},data:function(){return{modals:{},selectedModal:"deleteAll"}},computed:Object(s["a"])({},Object(B["b"])(["projectsTrash","pagesTrash","tasksTrash"]),{trashLength:function(){return this.projectsTrash.length},projectsTrashIds:function(){return this.projectsTrash&&this.projectsTrash.map(function(t){return t.id})},modal:function(){return this.$refs.operationalModal}}),methods:{restore:function(t,e){var n=this;this.$store.dispatch("TRASH_RESTORE_".concat(t.toUpperCase()),e).then(function(){Object(c["e"])(n,"success","".concat(t," restored"))}).catch(function(t){Object(c["e"])(n,"error",t)})},delete:function(){var t=this,e=this.dataForOperations.target;this.$store.dispatch("TRASH_DELETE_".concat(e.toUpperCase()),{id:this.dataForOperations.id}).then(function(){t.modal&&(t.modal.showModal=!1)}).catch(function(e){Object(c["e"])(t,"error",e),t.$refs.operationalModal.showModal=!1})}}},R=A,N=n("09d1"),L=Object(w["a"])(R,a,o,!1,null,"6e3c1541",null);"function"===typeof N["default"]&&Object(N["default"])(L);e["default"]=L.exports},"892c":function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"a",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return d});var a=n("2b0e"),o=n("73e4"),s=n.n(o);function i(t,e,n){t&&e&&n&&t.$noty[e](n)}function r(t,e){t.$noty.success("Welcome back, "+e)}function l(t,e){t.$noty.error("Error with login: "+e)}function c(t,e){t.$noty.success(e)}function d(t,e){t.$noty.error("Error with login: "+e)}a["default"].use(s.a,{timeout:1500,dismissQueue:!0,killer:!0,progressBar:!1,layout:"topCenter",theme:"mint",animation:{open:"scale-in-bottom",close:"scale-out-top"}})},"8e77":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-button",{staticClass:"v-button-inline",attrs:{loading:t.loading,theme:t.appTheme},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},o=[],s=n("f6f1"),i={name:"VButtonInline",components:{VButton:s["a"]},extends:s["a"]},r=i,l=(n("b02b"),n("2877")),c=Object(l["a"])(r,a,o,!1,null,"5ed7be00",null);e["a"]=c.exports},"9f32":function(t,e,n){"use strict";var a=n("d1f6"),o=n.n(a);o.a},b02b:function(t,e,n){"use strict";var a=n("c481"),o=n.n(a);o.a},b937:function(t,e,n){"use strict";var a=n("bb23"),o=n.n(a);o.a},bb23:function(t,e,n){},bf72:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-card",class:{selected:t.selected}},[n("div",{staticClass:"v-card-content"},[n("div",{staticClass:"v-card-image-container"},[t.image?n("div",{staticClass:"image",style:{backgroundImage:"url("+t.image+")"},attrs:{alt:t.name}}):t._e(),t.badge?n("div",{staticClass:"v-card-badge"},[t._v(t._s(t.badge))]):t._e()]),n("div",{staticClass:"v-card-text-container",on:{click:t.onclick}},[n("div",{staticClass:"name"},[t._v(t._s(t.name))]),n("div",{staticClass:"text"},[t._v(t._s(t._f("truncate")(t.text,70)))]),n("div",{staticClass:"caption"},[t._v(t._s(t.caption))])])]),t.showMenu?n("div",{staticClass:"v-card-menu"},[t.selectingMode?t._e():n("panel-control",{attrs:{dropdown:""},scopedSlots:t._u([{key:"dropdown",fn:function(){return[t._t("menu")]}}])},[n("v-toggle",{attrs:{icon:"navigation-more",params:{iconSize:"25px"}}})],1)],1):t._e(),n("div",{staticClass:"v-card-actions"},[t._t("default")],2)])},o=[],s={filters:{truncate:function(t,e){return t&&t.length>e?"".concat(t.substring(0,e),"..."):t}}},i=n("10bc"),r=n("6c67"),l={name:"VCard",components:{PanelControl:r["a"],VToggle:i["a"]},mixins:[s],data:function(){return{selected:!1}},props:{name:{type:String,required:!0},image:String,caption:String,text:String,badge:String,selectingMode:Boolean,showMenu:Boolean},methods:{onclick:function(t){if(t.ctrlKey||this.selectingMode)return this.$emit("select"),this.selected=!this.selected;this.$emit("click")}}},c=l,d=(n("9f32"),n("2877")),u=Object(d["a"])(c,a,o,!1,null,null,null);e["a"]=u.exports},c481:function(t,e,n){},d1f6:function(t,e,n){},d5b3:function(t,e,n){},db44:function(t,e,n){"use strict";n("7f7f");e["a"]={name:"ModalMixin",data:function(){return{currentAction:null,dataForOperations:{}}},computed:{currentModalTitle:function(){return this.modals&&this.modals[this.selectedModal].title},currentModalDescription:function(){return this.modals&&this.modals[this.selectedModal].description},currentModalButtonName:function(){return this.modals&&this.modals[this.selectedModal].buttonName},selectedName:function(){return this.dataForOperations&&this.dataForOperations.name}},methods:{openModal:function(t,e){this.dataForOperations=e||{},this.selectedModal=t,this.$refs.operationalModal.showModal=!0;var n=this.modals[this.selectedModal].action;"function"===typeof this[n]&&(this.currentAction=this[n])}}}},e804:function(t,e,n){},ef16:function(t,e,n){"use strict";var a=n("fc36"),o=n.n(a);o.a},f6f1:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"v-button",class:[{loading:t.loading,"no-shadow":t.noShadow},t.appTheme],attrs:{type:"button"},on:{click:function(e){return t.$emit("click")},touchmove:function(e){return t.$emit("click")}}},[t._t("default")],2)},o=[],s=n("cebc"),i=n("2f62"),r={name:"VButton",props:{loading:Boolean,theme:{type:String,default:"white"},noShadow:Boolean},computed:Object(s["a"])({},Object(i["c"])(["appTheme"]))},l=r,c=(n("3110"),n("2877")),d=Object(c["a"])(l,a,o,!1,null,null,null);e["a"]=d.exports},fa26:function(t,e,n){},fc36:function(t,e,n){}}]);
//# sourceMappingURL=TrashView.TrashView.js.map