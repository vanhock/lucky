(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TrashView"],{"09d1":function(t,e,n){"use strict";var o=n("40a3"),a=n.n(o);e["default"]=a.a},1102:function(t,e,n){"use strict";var o=n("42f1"),a=n.n(o);a.a},"1aaa":function(t,e,n){"use strict";var o=n("617d"),a=n.n(o);e["default"]=a.a},3110:function(t,e,n){"use strict";var o=n("d5b3"),a=n.n(o);a.a},"3e8a":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"pp-modal",class:{show:t.showModal},staticStyle:{display:"none"}},[n("div",{staticClass:"pp-modal-overlay",on:{click:function(e){!t.unableClosing&&(t.showModal=!1)}}}),n("div",{staticClass:"pp-modal-container",class:{wide:t.wide}},[n("div",{staticClass:"pp-modal-close",on:{click:function(e){t.unableClosing?t.$emit("reload"):t.showModal=!1}}}),n("div",{staticClass:"pp-modal-header"},[n("div",{staticClass:"pp-modal-title"},[t._v(t._s(t.title))]),t.description?n("div",{staticClass:"pp-modal-description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t.showModal?n("div",{staticClass:"pp-modal-content"},[t._t("default")],2):t._e()])])},a=[],r=n("025e"),s={name:"VModal",data:function(){return{showModal:!1}},props:{title:String,description:String,unableClosing:Boolean,wide:Boolean},watch:{showModal:function(t){t?(Object(r["a"])(document.body,"popup-open"),console.log("onModalOpen"),this.$emit("open")):(Object(r["j"])(document.body,"popup-open"),this.$emit("close"))}}},i=s,c=(n("ef16"),n("2877")),l=Object(c["a"])(i,o,a,!1,null,null,null);e["a"]=l.exports},"40a3":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"Empty projects trash":"Empty projects trash","Restore":"Restore","Delete forever":"Delete forever","Empty all in trash":"Empty all in trash","All documents in trash will be deleted permanently!":"All documents in trash will be deleted permanently!","Delete project":"Delete project","Delete page":"Delete page","The Project will be deleted permanently!":"The Project will be deleted permanently!","The Page will be deleted permanently!":"The Page will be deleted permanently!"},"ru":{"Empty projects trash":"Очистить проекты в корзине","Restore":"Восстановить","Delete forever":"Удалить навсегда","Empty all in trash":"Удалить все содержимое корзины","All documents in trash will be deleted permanently!":"Все документы в корзине удалятся без возможности восстановления!","Delete project":"Удалить проект","Delete page":"Удалить страницу","The Project will be deleted permanently!":"Проект будет удален без возможности восстановления!","The Page will be deleted permanently!":"Страница будет удалена без возможности восстановления!"}}'),delete t.options._Ctor}},4295:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-placeholder",class:[{transparent:t.transparent},t.alignment]},[t.icon?n("div",{staticClass:"image"},[n("v-icon",{attrs:{icon:t.icon,params:{iconSize:t.iconSize}}})],1):t._e(),n("div",{staticClass:"title"},[t._v(t._s(t.title))]),t.text?n("div",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._t("default")],2)},a=[],r=n("bd91"),s={name:"EmptyPlaceholder",components:{VIcon:r["a"]},props:{title:{type:String,default:function(){return this.$t("Have no data here")}},text:String,icon:String,iconSize:{type:String,default:"100px"},alignment:{type:String,default:"center"},transparent:Boolean}},i=s,c=(n("8234"),n("2877")),l=Object(c["a"])(i,o,a,!1,null,"2f14161d",null);e["a"]=l.exports},"42f1":function(t,e,n){},"5a0b":function(t,e,n){"use strict";var o=n("bf51"),a=n.n(o);a.a},"5eac":function(t,e,n){},"617d":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"Restore":"Restore","Delete forever":"Delete forever"},"ru":{"Restore":"Восстановить","Delete forever":"Удалить навсегда"}}'),delete t.options._Ctor}},"6c67":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"panel",staticClass:"panel-control",class:{"dropdown-open":t.showDropdown},on:{mouseleave:function(e){t.showDropdown=!1}}},[n("div",{staticClass:"panel-control-content",on:{click:function(e){t.dropdown&&(t.showDropdown=!t.showDropdown)}}},[t._t("default")],2),t.dropdown?n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDropdown,expression:"showDropdown"}],ref:"dropdown",staticClass:"dropdown"},[n("div",{staticClass:"dropdown-content"},[t._t("dropdown")],2)]):t._e()])},a=[],r=n("025e"),s={name:"PanelControl",mounted:function(){var t=this;this.dropdown&&(console.log("test click outside panel control dropdown"),this.$nextTick(function(){document.body.onclick=function(e){e.target!==t.$refs.panel&&t.$refs.panel!==Object(r["i"])(e.target,"panel-control")&&(t.showDropdown=!1),e.stopPropagation()}}))},data:function(){return{showDropdown:!1}},props:{dropdown:Boolean},methods:{closePanelDropdown:function(){}}},i=s,c=(n("e010"),n("2877")),l=Object(c["a"])(i,o,a,!1,null,"2b67f58c",null);e["a"]=l.exports},"6d1b":function(t,e,n){"use strict";var o=n("fa26"),a=n.n(o);a.a},"6dc5":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-button",{staticClass:"v-button-primary",attrs:{loading:t.loading,theme:t.appTheme,"no-shadow":""},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},a=[],r=n("f6f1"),s={name:"VButtonPrimary",components:{VButton:r["a"]},extends:r["a"]},i=s,c=(n("5a0b"),n("2877")),l=Object(c["a"])(i,o,a,!1,null,"6017c7c4",null);e["a"]=l.exports},7252:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trash-view"},[t.trashLength?[n("v-button-primary",{on:{click:function(e){return t.openModal("deleteAll",{target:"project",id:t.projectsTrashIds})}}},[t._v(t._s(t.$t("Empty projects trash")))]),n("trash-list",{attrs:{trash:t.tasksTrash,title:t.$t("Tasks")},on:{restore:function(e){return t.restore("task",e)},delete:function(e){return t.openModal("deleteTask",Object.assign({},{target:"task"},e))}}}),n("trash-list",{attrs:{trash:t.projectsTrash,title:t.$t("projects")},on:{restore:function(e){return t.restore("project",e)},delete:function(e){return t.openModal("deleteProject",Object.assign({},{target:"project"},e))}}}),n("v-modal",{ref:"operationalModal",staticClass:"operational-modal",attrs:{title:t.currentModalTitle,description:t.currentModalDescription}},[n("v-button-primary",{on:{click:t.currentAction}},[t._v(t._s(t.currentModalButtonName))])],1)]:t._e(),t.trashLength?t._e():[n("empty-placeholder",{attrs:{title:"Trash is empty",icon:"garbage"}})]],2)},a=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("db44"),i=n("6dc5"),c=n("4359"),l=n("892c"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.trash&&t.trash.length?n("div",{staticClass:"trash-list"},[n("card-table-list",{attrs:{title:t.title}},t._l(t.trash,function(e){return n("v-card-table",{key:e.id,staticClass:"trash-list-item",attrs:{name:e.name,caption:t.normalizeData(e.updatedAt),actions:t.actions},on:{restore:function(n){return t.$emit("restore",e)},delete:function(n){return t.$emit("delete",e)}}})}),1)],1):t._e()},u=[],p=n("025e"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"v-card-table",attrs:{name:t.name,caption:t.caption,text:t.text,badge:t.badge}},[t.actions&&t.actions.length?t._l(t.actions,function(e,o){return n("v-button-inline",{key:o,class:"action-"+e.name,on:{click:function(n){return t.$emit(e.name)}}},[t._v(t._s(e.title))])}):t._e()],2)},h=[],m=n("bf72"),b=n("8e77"),v={name:"VCardTable",components:{VButtonInline:b["a"],VCard:m["a"]},extends:m["a"],props:{actions:{type:Array,default:function(){return[]}}}},g=v,w=(n("6d1b"),n("2877")),_=Object(w["a"])(g,f,h,!1,null,null,null),y=_.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-table-list"},[t.title?n("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),n("div",{staticClass:"card-table-list-container"},[t._t("default")],2)])},O=[],C={name:"CardTableList",props:{title:String}},$=C,T=(n("b937"),Object(w["a"])($,j,O,!1,null,null,null)),M=T.exports,k={name:"TrashList",components:{CardTableList:M,VCardTable:y},created:function(){this.actions=[{name:"restore",title:this.$t("Restore")},{name:"delete",title:this.$t("Delete forever")}]},data:function(){return{actions:[]}},props:{trash:{type:Array,default:function(){return[]}},title:String},methods:{normalizeData:function(t){return Object(p["h"])(t)}}},D=k,x=n("1aaa"),E=Object(w["a"])(D,d,u,!1,null,null,null);"function"===typeof x["default"]&&Object(x["default"])(E);var P=E.exports,S=n("2f62"),B=n("3e8a"),V=n("4295");function A(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var N={name:"TrashView",mixins:[s["a"]],components:{EmptyPlaceholder:V["a"],TrashList:P,VButtonPrimary:i["a"],VModal:B["a"]},created:function(){this.$store.dispatch(c["G"]),this.$store.dispatch(c["H"]),this.modals={deleteAll:{title:this.$t("Empty all in trash"),description:this.$t("All documents in trash will be deleted permanently!"),action:"delete",buttonName:this.$t("Empty trash")},deleteProject:{title:this.$t("Delete project"),description:this.$t("The Project will be deleted permanently!"),action:"delete",buttonName:this.$t("Delete project")},deleteTask:{title:this.$t("Delete task"),description:this.$t("The Task will be deleted permanently!"),action:"delete",buttonName:this.$t("Delete task")}}},data:function(){return{modals:{},selectedModal:"deleteAll"}},computed:R({},Object(S["b"])(["projectsTrash","pagesTrash","tasksTrash"]),{trashLength:function(){return this.projectsTrash.length},projectsTrashIds:function(){return this.projectsTrash&&this.projectsTrash.map(function(t){return t.id})},modal:function(){return this.$refs.operationalModal}}),methods:{restore:function(t,e){var n=this;this.$store.dispatch("TRASH_RESTORE_".concat(t.toUpperCase()),e).then(function(){Object(l["e"])(n,"success","".concat(t," restored"))}).catch(function(t){Object(l["e"])(n,"error",t)})},delete:function(){var t=this,e=this.dataForOperations.target;this.$store.dispatch("TRASH_DELETE_".concat(e.toUpperCase()),{id:this.dataForOperations.id}).then(function(){t.modal&&(t.modal.showModal=!1)}).catch(function(e){Object(l["e"])(t,"error",e),t.$refs.operationalModal.showModal=!1})}}},L=N,z=n("09d1"),F=Object(w["a"])(L,o,a,!1,null,"055a022b",null);"function"===typeof z["default"]&&Object(z["default"])(F);e["default"]=F.exports},8234:function(t,e,n){"use strict";var o=n("85bc"),a=n.n(o);a.a},"85bc":function(t,e,n){},"892c":function(t,e,n){"use strict";n.d(e,"e",function(){return s}),n.d(e,"b",function(){return i}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"c",function(){return d});var o=n("2b0e"),a=n("73e4"),r=n.n(a);function s(t,e,n){t&&e&&n&&t.$noty[e](n)}function i(t,e){t.$noty.success("Welcome back, "+e)}function c(t,e){t.$noty.error("Error with login: "+e)}function l(t,e){t.$noty.success(e)}function d(t,e){t.$noty.error("Error with login: "+e)}o["default"].use(r.a,{timeout:1500,dismissQueue:!0,killer:!0,progressBar:!1,layout:"topCenter",theme:"mint",animation:{open:"scale-in-bottom",close:"scale-out-top"}})},"8e77":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-button",{staticClass:"v-button-inline",attrs:{loading:t.loading,theme:t.appTheme},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},a=[],r=n("f6f1"),s={name:"VButtonInline",components:{VButton:r["a"]},extends:r["a"]},i=s,c=(n("1102"),n("2877")),l=Object(c["a"])(i,o,a,!1,null,"7e125455",null);e["a"]=l.exports},"9f32":function(t,e,n){"use strict";var o=n("d1f6"),a=n.n(o);a.a},b937:function(t,e,n){"use strict";var o=n("bb23"),a=n.n(o);a.a},bb23:function(t,e,n){},bf51:function(t,e,n){},bf72:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-card",class:{selected:t.selected}},[n("div",{staticClass:"v-card-content"},[n("div",{staticClass:"v-card-image-container"},[t.image?n("div",{staticClass:"image",style:{backgroundImage:"url("+t.image+")"},attrs:{alt:t.name}}):t._e(),t.badge?n("div",{staticClass:"v-card-badge"},[t._v(t._s(t.badge))]):t._e()]),n("div",{staticClass:"v-card-text-container",on:{click:t.onclick}},[n("div",{staticClass:"name"},[t._v(t._s(t.name))]),n("div",{staticClass:"text"},[t._v(t._s(t._f("truncate")(t.text,70)))]),n("div",{staticClass:"caption"},[t._v(t._s(t.caption))])])]),t.showMenu?n("div",{staticClass:"v-card-menu"},[t.selectingMode?t._e():n("panel-control",{attrs:{dropdown:""},scopedSlots:t._u([{key:"dropdown",fn:function(){return[t._t("menu")]},proxy:!0}],null,!0)},[n("v-toggle",{attrs:{icon:"navigation-more",params:{iconSize:"25px"}}})],1)],1):t._e(),n("div",{staticClass:"v-card-actions"},[t._t("default")],2)])},a=[],r={filters:{truncate:function(t,e){return t&&t.length>e?"".concat(t.substring(0,e),"..."):t}}},s=n("10bc"),i=n("6c67"),c={name:"VCard",components:{PanelControl:i["a"],VToggle:s["a"]},mixins:[r],data:function(){return{selected:!1}},props:{name:{type:String,required:!0},image:String,caption:String,text:String,badge:String,selectingMode:Boolean,showMenu:Boolean},methods:{onclick:function(t){if(t.ctrlKey||this.selectingMode)return this.$emit("select"),this.selected=!this.selected;this.$emit("click")}}},l=c,d=(n("9f32"),n("2877")),u=Object(d["a"])(l,o,a,!1,null,null,null);e["a"]=u.exports},d1f6:function(t,e,n){},d5b3:function(t,e,n){},db44:function(t,e,n){"use strict";n("7f7f");e["a"]={name:"ModalMixin",data:function(){return{currentAction:null,dataForOperations:{}}},computed:{currentModalTitle:function(){return this.modals&&this.modals[this.selectedModal].title},currentModalDescription:function(){return this.modals&&this.modals[this.selectedModal].description},currentModalButtonName:function(){return this.modals&&this.modals[this.selectedModal].buttonName},selectedName:function(){return this.dataForOperations&&this.dataForOperations.name}},methods:{openModal:function(t,e){this.dataForOperations=e||{},this.selectedModal=t,this.$refs.operationalModal.showModal=!0;var n=this.modals[this.selectedModal].action;"function"===typeof this[n]&&(this.currentAction=this[n])}}}},e010:function(t,e,n){"use strict";var o=n("5eac"),a=n.n(o);a.a},ef16:function(t,e,n){"use strict";var o=n("fc36"),a=n.n(o);a.a},f6f1:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"v-button",class:[{loading:t.loading,"no-shadow":t.noShadow},t.appTheme],attrs:{type:"button"},on:{click:function(e){return t.$emit("click")},touchmove:function(e){return t.$emit("click")}}},[t._t("default")],2)},a=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("2f62");function i(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var l={name:"VButton",props:{loading:Boolean,theme:{type:String,default:"white"},noShadow:Boolean},computed:c({},Object(s["c"])(["appTheme"]))},d=l,u=(n("3110"),n("2877")),p=Object(u["a"])(d,o,a,!1,null,null,null);e["a"]=p.exports},fa26:function(t,e,n){},fc36:function(t,e,n){}}]);
//# sourceMappingURL=TrashView.TrashView.js.map