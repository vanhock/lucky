(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ConductorView","SignIn"],{"04c5":function(t,e,n){},"2b42":function(t,e,n){"use strict";var o=n("ed46"),s=n.n(o);s.a},"581b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"conductor-view"},[n("div",[t.notFound?t._e():n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"conductor-view-container"},[n("div",{staticClass:"conductor-view-project"},[t.currentProject.image?n("div",{staticClass:"project-image",style:{backgroundImage:"url("+t.currentProject.image+")"},attrs:{alt:t.currentProject.title}}):t._e(),n("div",{staticClass:"project-info-overlay"},[n("div",{staticClass:"project-title"},[n("v-icon",{attrs:{mode:t.overlayIcon.mode,icon:"file",params:t.overlayIcon.params}}),t._v(t._s(t.currentProject.name)+"\n          ")],1),n("div",{staticClass:"project-url"},[n("v-icon",{attrs:{mode:t.overlayIcon.mode,icon:"globe",params:t.overlayIcon.params}}),t._v(t._s(t.currentProject.url)+"\n          ")],1),n("div",{staticClass:"project-tasks"},[n("v-icon",{attrs:{mode:t.overlayIcon.mode,icon:"check-square",params:t.overlayIcon.params}}),t._v("0\n          ")],1)])]),n("div",{staticClass:"conductor-view-auth"},[n("router-link",{attrs:{to:"/"}},[n("v-icon",{staticClass:"pixel-icon",attrs:{icon:"logo",params:{iconSize:"100px"}}})],1),n("div",{staticClass:"conductor-auth-title"},[t._v("\n          "+t._s(!t.notFound&&t.titleText||"")+"\n        ")]),t.authorized&&t.hasExtension?n("div",{staticClass:"spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})]):t._e(),n("div",{staticClass:"conductor-auth-description"},[t._v("\n          "+t._s(!t.notFound&&t.descriptionText||"")+"\n        ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.notFound&&(!t.authorized||!t.hasExtension),expression:"!notFound && (!authorized || !hasExtension)"}],staticClass:"conductor-steps"},[n("div",{staticClass:"step-auth",class:{ok:t.authorized}},[n("v-icon",{attrs:{icon:t.stepStyle(t.authorized).icon,mode:t.icon.mode,params:Object.assign({},t.icon.params,{stroke:t.stepStyle(t.authorized).color})}}),n("div",{staticClass:"cont"},[n("div",{staticClass:"cont-title"},[t._v("\n                "+t._s(t.authorized?"You are authorized":(t.showSteps?"1. ":"")+t.$t("Login to this project"))+"\n              ")]),t.authorized?t._e():[t.showAuthError&&t.currentAccessError?n("div",{staticClass:"sign-in-error"},[t._v("\n                  "+t._s(t.currentAccessError)+"\n                ")]):t._e(),n("sign-in",{attrs:{custom:""},on:{success:t.onAuth,error:t.onAuthError}})]],2)],1),n("div",{staticClass:"step-extension",class:{ok:t.hasExtension}},[n("v-icon",{attrs:{icon:t.stepStyle(t.hasExtension).icon,mode:t.icon.mode,params:Object.assign({},t.icon.params,{stroke:t.stepStyle(t.hasExtension).color})}}),n("div",{staticClass:"cont"},[n("div",{staticClass:"cont-title"},[t._v("\n                "+t._s(t.hasExtension?"Extension installed":(t.showSteps?"2. ":"")+t.$t("Install our extension by link"))+"\n              ")]),t.hasExtension?t._e():n("v-button-primary",[t._v(t._s(t.$t("Download")))])],1)],1)])],1)]),t.notFound?n("div",{staticClass:"not-found"},[n("div",{staticClass:"not-found-image"},[n("v-icon",{attrs:{icon:"project",params:{iconSize:"100px"}}})],1),n("div",{staticClass:"not-found-message"},[t._v(t._s(t.currentAccessError))])]):t._e()])])},s=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),i=n("4359"),a=(n("db49"),n("bd91")),c=n("6dc5"),u=n("d039"),d=n("2f62");function l(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var p={name:"ConductorView",components:{SignIn:u["default"],VButtonPrimary:c["a"],VIcon:a["a"]},created:function(){this.getProject();var t=this;window.addEventListener("message",function(e){e.source===window&&(e.data.hasOwnProperty("extensionInstalled")&&(t.hasExtension=e.data.extensionInstalled,t.hasExtension&&t.redirect()),e.data.hasOwnProperty("extensionUninstalled")&&(t.hasExtension=!1))})},mounted:function(){var t=this;this.$nextTick(function(){t.checkExtensionInstalled()}),this.extensionCheckInterval=setInterval(function(){t.checkExtensionInstalled()},2e3)},data:function(){return{logoParams:{iconSize:"20px"},loading:!0,authorized:!1,hasExtension:!1,accessError:null,notFound:!1,showAuthError:!1,icon:{mode:"feather",params:{iconSize:"22px"}},overlayIcon:{mode:"feather",params:{iconSize:"16px"}},redirected:!1,extensionCheckInterval:null}},computed:h({},Object(d["b"])(["currentProject"]),{titleText:function(){return this.authorized||this.hasExtension?this.authorized&&this.hasExtension?this.$t("Open page"):this.$t("One step to open page"):this.$t("Two steps to open page")},descriptionText:function(){return this.authorized&&this.hasExtension?this.$t("Redirecting..."):this.$t("You will redirect to target page after complete these steps")},showSteps:function(){return!this.authorized&&!this.hasExtension},currentAccessError:function(){return this.accessError&&this.$t(this.accessError)}}),props:{type:String,permalink:String,page:String},methods:{getProject:function(){var t=this;this.$store.dispatch(i["w"],{permalink:this.permalink}).then(function(){return t.checkProjectAccess()}).catch(function(e){t.loaded(function(){t.accessError=e,t.notFound=!0})})},checkProjectAccess:function(){var t=this;return this.loading=!0,this.$store.dispatch(i["r"],{permalink:this.permalink}).then(function(){return t.loading=!1,t.accessError="",t.authorized=!0}).catch(function(e){return t.loading=!1,t.accessError=e,t.authorized=!1})},checkExtensionInstalled:function(){try{window.postMessage({checkExtension:!0},location.href)}catch(t){this.hasExtension=!1}},onAuth:function(){this.checkProjectAccess(),this.showAuthError=!0},onAuthError:function(t){this.showAuthError=!0,this.accessError=t},stepStyle:function(t){return t&&{icon:"check-circle",color:"#2ed609"}||{icon:"arrow-right",color:"#a035fb"}},loaded:function(t){t();var e=this;setTimeout(function(){e.loading=!1},400)},redirect:function(){this.authorized&&this.hasExtension&&!this.redirected&&(window.postMessage({setExtensionReady:this.currentProject.url},location.href),this.redirected=!0)}}},v=p,m=(n("2b42"),n("2877")),f=Object(m["a"])(v,o,s,!1,null,null,null);e["default"]=f.exports},aa9e:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-input",{ref:"input",staticClass:"v-input-bordered",attrs:{type:t.type,name:t.name,label:t.label,value:t.value,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete,disabled:t.disabled}})},s=[],r=n("ccfc"),i={name:"VInputBordered",components:{VInput:r["a"]},mounted:function(){var t=this;this.$refs.input.$on("onchange",function(){t.$emit("onchange")})},extends:r["a"]},a=i,c=(n("be2a"),n("2877")),u=Object(c["a"])(a,o,s,!1,null,null,null);e["a"]=u.exports},be2a:function(t,e,n){"use strict";var o=n("04c5"),s=n.n(o);s.a},d039:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-in",on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.authorization(e)}}},[n("form-group",{ref:"form",attrs:{loading:t.loading}},[n("v-input-bordered",{attrs:{name:"email",label:t.$t("email"),autocomplete:"username",required:""}}),n("v-input-bordered",{attrs:{name:"password",type:"password",label:t.$t("password"),autocomplete:"current-password",required:""}})],1),n("v-button-primary",{staticClass:"submit",attrs:{loading:t.loading},on:{click:t.authorization}},[t._v(t._s(t.$t("signIn")))])],1)},s=[],r=(n("7f7f"),n("2ef0")),i=n.n(r),a=n("aa9e"),c=n("2231"),u=n("892c"),d=n("4359"),l=n("6dc5"),h={name:"SignIn",components:{VButtonPrimary:l["a"],FormGroup:c["a"],VInputBordered:a["a"]},data:function(){return{loading:!1}},props:{custom:Boolean},methods:{authorization:i.a.debounce(function(){var t=this,e=this,n=this.$refs.form.valid,o=this.$refs.form.changedItems;if(!n)return this.$refs.form.showValidation(),Object(u["a"])(this,"Form not valid!");this.loading=!0,this.$store.dispatch(d["d"],o).then(function(n){t.$emit("success",n),t.loading=!1,t.custom||(Object(u["b"])(t,n.name),setTimeout(function(){e.$router.push("/")},2e3))}).catch(function(e){t.loading=!1,t.$emit("error",e),t.custom||Object(u["a"])(t,e)})},300)}},p=h,v=n("2877"),m=Object(v["a"])(p,o,s,!1,null,"42907fce",null);e["default"]=m.exports},ed46:function(t,e,n){}}]);
//# sourceMappingURL=ConductorView.ConductorView.js.map